<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <title>Live Agent</title>
    <style type='text/css'>
	.embeddedServiceHelpButton .helpButton .uiButton {
		background-color: #005290;
		font-family: "Arial", sans-serif;
	}
	.embeddedServiceHelpButton .helpButton .uiButton:focus {
		outline: 1px solid #005290;
	}
    </style>
</head>
<body>
<script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
<script type='text/javascript'>
	var initESW = function(gslbBaseURL) {
		embedded_svc.settings.displayHelpButton = true; //O falso
		embedded_svc.settings.language = ''; //Por ejemplo, introduzca 'en' o 'en-US'

		//embedded_svc.settings.defaultMinimizedText = '...'; //(Toma como valor predeterminado Sesión de chat con un experto)
		//embedded_svc.settings.disabledMinimizedText = '...'; //(Toma como valor predeterminado Agente sin conexión)

		//embedded_svc.settings.loadingText = ''; //(Toma como valor predeterminado Cargando)
		//embedded_svc.settings.storageDomain = 'yourdomain.com'; //(Establece el dominio para su desarrollo de modo que los visitantes puedan navegar por subdominios durante una sesión de chat)

		// Configuración para Chat
		//embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
			// Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
			// Returns a valid button ID.
		//};
		//embedded_svc.settings.prepopulatedPrechatFields = {}; //Establece la cumplimentación automática de los campos del formulario previo al chat
		//embedded_svc.settings.fallbackRouting = []; //Una matriz de identificadores de botones, de usuario o userId_buttonId
		//embedded_svc.settings.offlineSupportMinimizedText = '...'; //(Toma como valor predeterminado la opción Contacto)

		embedded_svc.settings.enabledFeatures = ['LiveAgent'];
		embedded_svc.settings.entryFeature = 'LiveAgent';
		
		embedded_svc.settings.extraPrechatInfo = {
			"entityName": "Contact",
			"entityFieldMaps": [{
				"isExactMatch": true,
				"fieldName": "FirstName",
				"doCreate": true,
				"doFind": true,
				"label": "firstName"
			}, {
				"isExactMatch": true,
				"fieldName": "LastName",
				"doCreate": true,
				"doFind": true,
				"label": "LastName"
			}, {
				"isExactMatch": true,
				"fieldName": "JSON_User_Mex__c",
				"doCreate": true,
				"doFind": true,
				"label": "JSONUserMex"
			}, {
				"isExactMatch": true,
				"fieldName": "Email",
				"doCreate": true,
				"doFind": true,
				"label": "Email"
			}]
		};
		
		let JSON = JSON.stringify({"user":{"userId":"9942828e-2757-43e9-9d0b-ed0101f20005","username":"testuser_23087570@uala.com.ar","phoneNumber":"1596572315","phoneNumberCountryCode":"52","email":"testuser_23087570@uala.com.ar","address":"{\"street\":\"Calz. Gral. Lopez Mariano Escobedo\",\"internalNumber\":\"No. 50\",\"externalNumber\":\"No. 700\",\"zipCode\":\"11590\",\"city\":\"Cdmx\",\"state\":\"DF\",\"colony\":\"Anzures\",\"delegation\":\"Distrito Federal Federal\",\"observations\":\"Diagonal a la comandancia policial\"}","deliveryAddress":"{\"street\":\"Calz. Gral. Lopez Mariano Escobedo\",\"internalNumber\":\"No. 50\",\"externalNumber\":\"No. 700\",\"zipCode\":\"11590\",\"city\":\"Cdmx\",\"state\":\"DF\",\"colony\":\"Anzures\",\"delegation\":\"Distrito Federal Federal\",\"observations\":\"Diagonal a la comandancia policial\"}","idBackPicture":"a3268a0d-6eba-4c53-b03d-2d2c5e73d167-IdBackPicture.jpg","idFrontPicture":"68c0da82-f983-4591-990e-f417520671ff-IdFrontPicture.jpg","selfiePicture":"503a207c-ef54-4cf9-ad45-c498b1c9dd58-SelfiePicture.jpg","givenName":"Jimí","firstLastName":"Godöy","secondLastName":"Álvarez","gender":"Male","birthDate":"11/12/1954","birthPlace":"Cancun","nationality":"484","occupation":"79","CURP":"GOAJ541211HDFDLM08","documentType":"4","createdDate":1596572315315,"updatedDate":1596572317371,"coordinates":"19°36′00″N 87°55′00″O","birthEntity":"QT"}});
		
	    	embedded_svc.settings.extraPrechatFormDetails = [{
      			"label": "JSONUserMex",
      			"value": JSON,
      			"displayToAgent": false
    		}];
		
		embedded_svc.init(
			'https://uala--ualadev.my.salesforce.com',
			'https://ualadev-ualadev.cs35.force.com/liveAgentSetupFlow',
			gslbBaseURL,
			'00D2g0000000O2w',
			'Test',
			{
				baseLiveAgentContentURL: 'https://c.la3-c1cs-ph2.salesforceliveagent.com/content',
				deploymentId: '5722g000000CaZq',
				buttonId: '5732g000000CbRK',
				baseLiveAgentURL: 'https://d.la3-c1cs-ph2.salesforceliveagent.com/chat',
				eswLiveAgentDevName: 'Test',
				isOfflineSupportEnabled: false
			}
		);
	};

	if (!window.embedded_svc) {
		var s = document.createElement('script');
		s.setAttribute('src', 'https://uala--ualadev.my.salesforce.com/embeddedservice/5.0/esw.min.js');
		s.onload = function() {
			initESW(null);
		};
		document.body.appendChild(s);
	} else {
		initESW('https://service.force.com');
	}
</script>
</body>
</html>
